(this["webpackJsonpreact-frontend"]=this["webpackJsonpreact-frontend"]||[]).push([[0],{21:function(e,t,c){},22:function(e,t,c){},24:function(e,t,c){},25:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c.n(n),l=c(10),r=c.n(l),i=(c(21),c(11)),s=c(12),o=c(15),u=c(14),f=(c(22),function(e){return a.a.createElement("li",null,e.todo)}),E=(c(6),"*/-+."),h=function(e,t){e.state.fresh?function(e,t){"."===t?e.setState({currentEq:"0.",fresh:!1}):e.setState({currentEq:t,fresh:!1})}(e,t):"."===t?function(e,t){var c=e.state.currentEq;(function(e){for(var t=e.length-1;t>=0;t--)if("*/-+.)".includes(e.charAt(t)))return"."===e.charAt(t);return!1})(c)||(")"===c.slice(-1)?c+="*0":(0===c.length||"*/-+.(".includes(c.slice(-1)))&&(c+="0"),c+=t),e.setState({currentEq:c,fresh:!1})}(e,t):function(e,t){var c=e.state.currentEq;"0"!==c.slice(-1)||0!==c.length&&!E.includes(c.slice(-2,-1))?")"===c.slice(-1)&&(c+="*"):c=c.slice(0,-1),c+=t,e.setState({currentEq:c,fresh:!1})}(e,t)},d=function(e){return a.a.createElement("button",{class:"CalcButton",id:"ValButton",onClick:function(){return h(e.calc,e.val)}},e.val)},m="*/-+.",v=function(e,t){"+/-"===t?function(e){for(var t=e.state.currentEq,c=t.length-1;c>=0;c--){if("-+".includes(t.charAt(c))){t=t.slice(0,c)+("+"===t.charAt(c)?"-":"+")+t.slice(c+1);break}if(m.slice(0,-1).includes(t.charAt(c))){t=t.slice(0,c+1)+"(-"+t.slice(c+1);break}if("("===t.charAt(c)||")"===t.charAt(c)){t=t.slice(0,c+1)+"-"+t.slice(c+1);break}0===c&&(t="-"+t)}e.setState({currentEq:t,fresh:!1})}(e):"()"===t?function(e){var t=e.state.currentEq;!function(e){for(var t=0,c=0,n=0;n<e.length;n++)"("===e.charAt(n)?t++:")"===e.charAt(n)&&c++;return t-c}(t)?("."===t.slice(-1)&&(t=t.slice(0,-1)),m.slice(0,-1).includes(t.slice(-1))||(t+="*"),t+="("):"("===t.slice(-1)||m.includes(t.slice(-1))?("."===t.slice(-1)&&(t=t.slice(0,-1),t+="*"),t+="("):t+=")",e.setState({currentEq:t,fresh:!1})}(e):function(e,t){var c=e.state.currentEq;0===c.length||"("===c.slice(-1)||"("===c.slice(-2,-1)&&m.includes(c.slice(-1))||(m.includes(c.slice(-1))&&(c=c.slice(0,-1)),c+=t),e.setState({currentEq:c,fresh:!1})}(e,t)},p=function(e){return a.a.createElement("button",{class:"CalcButton",id:"OpButton",onClick:function(){return v(e.calc,e.op)}},e.op)},C=c(27),g=function(e,t,c){"="===t?function(e,t){var c=e.state.currentEq;if(!"*/-+.".includes(c.slice(-1))&&"("!==c.slice(-1))for(var n=function(e){for(var t=0,c=0,n=0;n<e.length;n++)"("===e.charAt(n)?t++:")"===e.charAt(n)&&c++;return t-c}(c),a=0;a<n;a++)c+=")";try{var l=Object(C.a)(c),r={recentCalc:c+"="+String(l)};try{t.send(JSON.stringify(r))}catch(i){console.log(i)}e.setState({currentEq:String(l),fresh:!0})}catch(s){console.log("Invalid equation")}}(e,c):"CE"===t?function(e){var t=e.state.currentEq;t=t.slice(0,-1),e.setState({currentEq:t||"0",fresh:!1})}(e):function(e){e.setState({currentEq:"0",fresh:!1})}(e)},S=function(e){return a.a.createElement("button",{class:"CalcButton",id:"OtherButton",onClick:function(){return g(e.calc,e.op,e.ws)}},e.op)},q=(c(24),function(e){return a.a.createElement("div",{id:"CalcPanel"},a.a.createElement(S,{calc:e.calc,op:"AC"}),a.a.createElement(S,{calc:e.calc,op:"CE"}),a.a.createElement(p,{calc:e.calc,op:"()"}),a.a.createElement(p,{calc:e.calc,op:"/"}),a.a.createElement(d,{calc:e.calc,val:"7"}),a.a.createElement(d,{calc:e.calc,val:"8"}),a.a.createElement(d,{calc:e.calc,val:"9"}),a.a.createElement(p,{calc:e.calc,op:"*"}),a.a.createElement(d,{calc:e.calc,val:"4"}),a.a.createElement(d,{calc:e.calc,val:"5"}),a.a.createElement(d,{calc:e.calc,val:"6"}),a.a.createElement(p,{calc:e.calc,op:"-"}),a.a.createElement(d,{calc:e.calc,val:"1"}),a.a.createElement(d,{calc:e.calc,val:"2"}),a.a.createElement(d,{calc:e.calc,val:"3"}),a.a.createElement(p,{calc:e.calc,op:"+"}),a.a.createElement(p,{calc:e.calc,op:"+/-"}),a.a.createElement(d,{calc:e.calc,val:"0"}),a.a.createElement(d,{calc:e.calc,val:"."}),a.a.createElement(S,{calc:e.calc,ws:e.ws,op:"="}))}),w=window.location.origin.replace(/^http/,"ws"),b=function(e){Object(o.a)(c,e);var t=Object(u.a)(c);function c(){var e;return Object(i.a)(this,c),(e=t.call(this)).ws=new WebSocket(w+"/ws"),e.state={recentCalcs:[],currentEq:"0",fresh:!0},e}return Object(s.a)(c,[{key:"componentDidMount",value:function(){var e=this;this.ws.onopen=function(){e.ws.send(JSON.stringify({open:"true"})),console.log("connected")},this.ws.onmessage=function(t){var c=JSON.parse(t.data);null==c?e.setState({recentCalcs:[]}):e.setState({recentCalcs:c})},this.ws.onclose=function(){console.log("disconnected")}}},{key:"render",value:function(){var e=this,t=this.state.recentCalcs.slice(0).reverse().map((function(e){return a.a.createElement(f,{todo:e})}));return a.a.createElement("div",{id:"App"},a.a.createElement("div",{id:"Calculator"},a.a.createElement("div",null,a.a.createElement("textarea",{rows:"1",id:"displayBar",value:this.state.currentEq})),a.a.createElement("div",null,a.a.createElement(q,{id:"calcPanel",calc:this,ws:this.ws}))),a.a.createElement("div",{id:"RecentCalcs"},a.a.createElement("div",null,a.a.createElement("h3",{id:"RecentCalcsHeader"},"Recent Calculations"),0===this.state.recentCalcs.length?"No calculations yet!":a.a.createElement("ul",{id:"RecentCalcsList",reversed:!0},t)),a.a.createElement("div",null,0===this.state.recentCalcs.length?null:a.a.createElement("button",{id:"clearRecent",onClick:function(){e.ws.send(JSON.stringify({clear:"true"}))}},"Clear"))))}}]),c}(n.Component),A=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,28)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,l=t.getLCP,r=t.getTTFB;c(e),n(e),a(e),l(e),r(e)}))};r.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(b,null)),document.getElementById("root")),A()},6:function(e,t,c){}},[[25,1,2]]]);
//# sourceMappingURL=main.8602dfc6.chunk.js.map